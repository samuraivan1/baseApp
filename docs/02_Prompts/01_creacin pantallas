Quiero crea l anueva pantalla menu, con este prompt  

â€œCreaciÃ³n de Pantallas Basadas en el PatrÃ³n Permisos (BaseApp GDS)â€
ğŸ¯ PropÃ³sito

Eres un programador senior React + TypeScript y arquitecto de soluciones.
Tu tarea es replicar correctamente el patrÃ³n de Permisos ya definido en el proyecto baseApp,
generando una nueva pantalla CRUD (catÃ¡logo) funcional y alineada con los estÃ¡ndares del sistema.

ğŸ§© Contexto Base (IngenierÃ­a Inversa Fija)

La ingenierÃ­a inversa ya fue realizada sobre el mÃ³dulo Permisos, localizado en:

src/features/security/components/Permissions/


Este mÃ³dulo es el modelo de referencia obligatorio.
De Ã©l se heredan estructura, componentes reutilizables, flujo CRUD, RBAC y manejo visual.

âš ï¸ No repitas la ingenierÃ­a inversa, solo usa esta informaciÃ³n como base definitiva.

ğŸ§± Estructura General del PatrÃ³n â€œPermisosâ€

Cada pantalla tipo catÃ¡logo (CRUD) debe incluir:

PageHeader â†’ Encabezado con tÃ­tulo y acciones globales.

CommandBar â†’ Filtros, bÃºsqueda, botones (agregar, exportar).

PaginatedEntityTable â†’ Tabla con paginaciÃ³n, acciones y RBAC.

Formulario Embebido â†’ Dentro de la misma vista (no modal ni overlay).

Arquitectura: Feature-Sliced Design (FSD)
Stack: React + TypeScript + Zod + RHF + TanStack Query
Estilo: SCSS modular + GDS (Global Design System)
Seguridad: RBAC (dominio.recurso.acciÃ³n)
Mocks: MSW + BD.json
Validaciones: TypeScript estricto ("strict": true)

ğŸ§­ Objetivo del Prompt

Generar una nueva pantalla de catÃ¡logo CRUD (ejemplo: Productos, Roles, MenÃºs, etc.)
reutilizando los mismos componentes y estÃ¡ndares del patrÃ³n Permisos.

El prompt debe:

Crear todos los archivos necesarios (formulario, tabla, hooks, servicios, tipos, mensajes, mocks, permisos).

Actualizar los archivos globales requeridos (rutas, constantes, menÃºs, handlers, BD.json).

Validar que todo compile (tsc, lint, build).

Explicar cada paso y por quÃ© se hace asÃ­ (modo entrenamiento).

âš™ï¸ ParÃ¡metros del Prompt
ParÃ¡metro	Ejemplo	DescripciÃ³n
Module	security, inventory, products	MÃ³dulo funcional donde se crearÃ¡ la pantalla.
EntityName	Products	Nombre de la entidad (PascalCase para componentes).
RBACDomain	products.products	Dominio base para permisos RBAC.
RoutePath	/productos	Ruta de acceso.
NavPosition	after:Permisos	PosiciÃ³n de menÃº en el mÃ³dulo.
ğŸ§© FASE 1 â€” Estructura y Archivos a Generar

Basado en la estructura de Permisos:

src/features/{Module}/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ use{EntityName}Crud.ts
â”‚   â””â”€â”€ {entityName}Service.ts
â”œâ”€â”€ components/
â”‚   â””â”€â”€ {EntityName}/
â”‚       â”œâ”€â”€ index.tsx
â”‚       â”œâ”€â”€ {EntityName}Form.tsx
â”‚       â”œâ”€â”€ {entityName}.schema.ts
â”‚       â”œâ”€â”€ {EntityName}.messages.ts
â”‚       â””â”€â”€ {EntityName}.scss
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ permissions.ts
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ dto.ts
â”‚   â””â”€â”€ models.ts
â””â”€â”€ index.ts


AdemÃ¡s, se modifican:

src/routes/AppRoutes.tsx â†’ registrar la nueva ruta protegida.

src/features/security/constants/permissions.ts â†’ agregar permisos RBAC globales.

src/features/shell/components/Sidebar/Sidebar.tsx â†’ agregar enlace al menÃº.

src/mocks/handlers/{entityName}.ts â†’ crear handlers MSW.

src/mocks/db.json â†’ agregar colecciÃ³n y semilla.

ğŸ§© FASE 2 â€” Flujo CRUD Completo

API Service ({entityName}Service.ts):
Define getAll, create, update, delete usando apiClient con interceptores (auth, error, loading).
Devuelve objetos tipados (IEntity).
Usa el mismo formato que permissionService.ts.

Hook CRUD (use{EntityName}Crud.ts):

Reutiliza useEntityCrud y useSafeMutation.

Usa queryKey = ['{entityNamePlural}'].

Implementa invalidaciÃ³n tras create/update/delete.

Formulario ({EntityName}Form.tsx):

Basado en PermissionForm.tsx.

Usa OAForm o los componentes equivalentes que ya existen.

Controlado por RHF + Zod Resolver.

Llama a create o update segÃºn presencia de id.

En Ã©xito: cierra formulario, refetch y muestra toast.success.

Pantalla Principal (index.tsx):

Compone PageHeader, CommandBar, PaginatedEntityTable y el form embebido.

Gestiona visibilidad del form con estado local.

Llama a hooks de CRUD.

Aplica useCan() para controlar botones segÃºn permisos.

RBAC (permissions.ts):
Define:

export const ENTITY_PERMISSIONS = {
  VIEW: '{RBACDomain}.view',
  CREATE: '{RBACDomain}.create',
  UPDATE: '{RBACDomain}.update',
  DELETE: '{RBACDomain}.delete',
};


i18n ({EntityName}.messages.ts):
Define textos (title, createButton, searchPlaceholder, loading, etc.).
No incluir literales en JSX.

SCSS ({EntityName}.scss):
Usa variables GDS y BEM (.{entityName}__container, etc.).
No hardcodear colores.

Mocks (handlers/{entityName}.ts y db.json):
Replica handlers CRUD y agrega colecciÃ³n inicial.

ğŸ§© FASE 3 â€” Integraciones Globales

Rutas (AppRoutes.tsx):

import { {EntityName}Page } from '@/features/{Module}';
import { ENTITY_PERMISSIONS } from '@/features/{Module}/constants/permissions';

<Route
  path="{RoutePath}"
  element={
    <ProtectedRoute permiso={ENTITY_PERMISSIONS.VIEW}>
      <{EntityName}Page />
    </ProtectedRoute>
  }
/>


MenÃº lateral / principal:
Inserta el link despuÃ©s de Permisos (si mÃ³dulo = security),
o en la secciÃ³n equivalente si otro mÃ³dulo.
Usa Ã­cono e identificador siguiendo las convenciones GDS.

RBAC Global:
Actualiza src/features/security/constants/permissions.ts para incluir la nueva constante.

Mock Handlers:
Importa y agrega ...{entityName}Handlers en src/mocks/handlers.ts.

ğŸ§© FASE 4 â€” Validaciones, Calidad y DoD
Comprobaciones automÃ¡ticas:
npx tsc --noEmit
npm run lint
npm run build

Definition of Done

 Sin errores TS.

 Sin literales ni any.

 Linter pasa.

 Ruta protegida por RBAC.

 CRUD completo operativo.

 Estilos GDS correctos.

 Mock funcionando (MSW + BD.json).

 useCan() aplicado en acciones.

 PÃ¡gina con PageHeader + CommandBar + EntityTable + Form embebido.

ğŸ§  FASE 5 â€” Explicaciones DidÃ¡cticas (Entrenamiento)

Por quÃ© se hace asÃ­:

Ãrea	RazÃ³n tÃ©cnica
Formulario embebido	Mantiene consistencia visual y sincroniza el estado de tabla y form sin manejar modales ni context extra.
RHF + Zod	Tipado seguro, validaciones declarativas, integraciÃ³n perfecta con TS.
PaginatedEntityTable	Centraliza paginaciÃ³n, filtros y render condicional RBAC.
useEntityCrud + TanStack Query	Evita Redux; garantiza sincronÃ­a con backend y cache automÃ¡tico.
RBAC string-based	Permite auditar permisos y extender integraciones con backend SAP o IAM externo.
SCSS Modular + GDS	Evita colisiones de estilo y asegura coherencia UI global.
MSW	Permite desarrollo offline, QA funcional y pruebas automatizadas sin backend.
âš™ï¸ FASE 6 â€” AutomatizaciÃ³n (Modo IA)

Si se ejecuta en Codex o GPT-5-Code-Analyzer:

Usa este prompt como entrada.

Sustituye variables {Module} security, {EntityName}menu, {RBACDomain}security.menu, {RoutePath}/seguridad/menu.

Crea los archivos listados, replicando la estructura de Permisos.

Usa los mismos nombres de componentes (ej. OAForm, PaginatedEntityTable).

Genera y modifica archivos necesarios.

Ejecuta validaciÃ³n automÃ¡tica (tsc/lint/build).

Devuelve reporte con rutas creadas y estado de compilaciÃ³n.

ğŸ“¦ FASE 7 â€” Checklist Final de Entrenamiento
CategorÃ­a	ValidaciÃ³n	Estado esperado
CÃ³digo	Tipado estricto, sin any	âœ…
Estructura	FSD / modular / SCSS local	âœ…
Seguridad	RBAC activo en rutas y UI	âœ…
i18n	Sin literales en JSX	âœ…
API	CRUD completo con interceptores	âœ…
Mocks	MSW + BD.json sincronizados	âœ…
UI	Form embebido, PageHeader, CommandBar, Tabla	âœ…
GDS	Tokens, BEM, responsividad	âœ…
QA	Build limpio, lint sin errores	âœ…
ğŸš€ Resultado Esperado

Una nueva pantalla {EntityName} en {Module} totalmente funcional.

CRUD completo (listar, crear, editar, eliminar).

RBAC activo.

Ruta protegida.

Mocks listos.

Cero errores en compilaciÃ³n.

DocumentaciÃ³n consistente.